var NumberOfPages;function checkIfImageExists(e,o){const i=new Image;i.src=e,i.complete?o(!0):(i.onload=()=>{o(!0)},i.onerror=()=>{o(!1)})}var PgesNumber=16,disp="",wid=1508,hei=600;function loadApp(){$("#canvas").fadeIn(1e3);var e=$(".magazine");0!=e.width()&&0!=e.height()?(e.turn({display:disp,width:wid,height:hei,duration:1e3,gradients:!0,autoCenter:!0,elevation:50,pages:PgesNumber,when:{turning:function(e,o,i){var n=$(this);n.turn("page"),n.turn("pages");Hash.go("page/"+o).update(),disableControls(o)},turned:function(e,o,i){disableControls(o),$(this).turn("center"),$("#slider").slider("value",getViewNumber($(this),o)),1==o&&$(this).turn("peel","br")},missing:function(e,o){for(var i=0;i<o.length;i++)addPage(o[i],$(this))}}}),$(".magazine-viewport").zoom({flipbook:$(".magazine"),max:function(){return largeMagazineWidth()/$(".magazine").width()},when:{swipeLeft:function(){$(this).zoom("flipbook").turn("next")},swipeRight:function(){$(this).zoom("flipbook").turn("previous")},resize:function(e,o,i,n){1==o?loadSmallPage(i,n):loadLargePage(i,n)},zoomIn:function(){$("#slider-bar").hide(),$(".made").hide(),$(".magazine").removeClass("animated").addClass("zoom-in"),$(".zoom-icon").removeClass("zoom-icon-in").addClass("zoom-icon-out"),window.escTip||$.isTouch||(escTip=!0,$("<div />",{class:"exit-message"}).html("<div>Press ESC to exit</div>").appendTo($("body")).delay(2e3).animate({opacity:0},500,(function(){$(this).remove()})))},zoomOut:function(){$("#slider-bar").fadeIn(),$(".exit-message").hide(),$(".made").fadeIn(),$(".zoom-icon").removeClass("zoom-icon-out").addClass("zoom-icon-in"),setTimeout((function(){$(".magazine").addClass("animated").removeClass("zoom-in"),resizeViewport()}),0)}}}),$.isTouch?$(".magazine-viewport").bind("zoom.doubleTap",zoomTo):$(".magazine-viewport").bind("zoom.tap",zoomTo),$(document).keydown((function(e){switch(e.keyCode){case 37:$(".magazine").turn("previous"),e.preventDefault();break;case 39:$(".magazine").turn("next"),e.preventDefault();break;case 27:$(".magazine-viewport").zoom("zoomOut"),e.preventDefault()}})),Hash.on("^page/([0-9]*)$",{yep:function(e,o){var i=o[1];void 0!==i&&$(".magazine").turn("is")&&$(".magazine").turn("page",i)},nop:function(e){$(".magazine").turn("is")&&$(".magazine").turn("page",1)}}),$(window).resize((function(){resizeViewport()})).bind("orientationchange",(function(){resizeViewport()})),$.isTouch?$(".magazine").bind("touchstart",regionClick):$(".magazine").click(regionClick),$(".next-button").bind($.mouseEvents.over,(function(){$(this).addClass("next-button-hover")})).bind($.mouseEvents.out,(function(){$(this).removeClass("next-button-hover")})).bind($.mouseEvents.down,(function(){$(this).addClass("next-button-down")})).bind($.mouseEvents.up,(function(){$(this).removeClass("next-button-down")})).click((function(){$(".magazine").turn("next")})),$(".previous-button").bind($.mouseEvents.over,(function(){$(this).addClass("previous-button-hover")})).bind($.mouseEvents.out,(function(){$(this).removeClass("previous-button-hover")})).bind($.mouseEvents.down,(function(){$(this).addClass("previous-button-down")})).bind($.mouseEvents.up,(function(){$(this).removeClass("previous-button-down")})).click((function(){$(".magazine").turn("previous")})),$("#slider").slider({min:1,max:numberOfViews(e),start:function(e,o){window._thumbPreview?setPreview(o.value):(_thumbPreview=$("<div />",{class:"thumbnail"}).html("<div></div>"),setPreview(o.value),_thumbPreview.appendTo($(o.handle))),moveBar(!1)},slide:function(e,o){setPreview(o.value)},stop:function(){window._thumbPreview&&_thumbPreview.removeClass("show"),$(".magazine").turn("page",Math.max(1,2*$(this).slider("value")-2))}}),resizeViewport(),$(".magazine").addClass("animated")):setTimeout(loadApp,10)}window.innerWidth<=425?(disp="single",wid=808,hei=650):disp="double",$(".zoom-icon").bind("mouseover",(function(){$(this).hasClass("zoom-icon-in")&&$(this).addClass("zoom-icon-in-hover"),$(this).hasClass("zoom-icon-out")&&$(this).addClass("zoom-icon-out-hover")})).bind("mouseout",(function(){$(this).hasClass("zoom-icon-in")&&$(this).removeClass("zoom-icon-in-hover"),$(this).hasClass("zoom-icon-out")&&$(this).removeClass("zoom-icon-out-hover")})).bind("click",(function(){$(this).hasClass("zoom-icon-in")?$(".magazine-viewport").zoom("zoomIn"):$(this).hasClass("zoom-icon-out")&&$(".magazine-viewport").zoom("zoomOut")})),$("#canvas").hide(),yepnope({test:Modernizr.csstransforms,yep:["javascript/js/turn.min.js"],nope:["javascript/js/turn.html4.min.js","style/jquery.ui.html4.css"],both:["javascript/js/zoom.min.js","style/jquery.ui.css","javascript/magazine.js","style/magazine.css"],complete:loadApp});